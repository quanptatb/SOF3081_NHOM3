<script setup>
import { ref, computed } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()

const cart = ref([
  { id: 1, name: 'Thi·∫øt b·ªã A', price: 150000, quantity: 1 },
  { id: 2, name: 'Thi·∫øt b·ªã B', price: 300000, quantity: 2 }
])

const order = ref({
  name: '',
  address: '',
  phone: '',
  payment: 'COD'
})

const total = computed(() =>
  cart.value.reduce((sum, item) => sum + item.price * item.quantity, 0)
)

const formatPrice = (price) =>
  price.toLocaleString('vi-VN') + ' ‚Ç´'

const submitOrder = () => {
  alert('Thanh to√°n th√†nh c√¥ng!')
  router.push('/cart')
}
</script>

<template>
  <div class="container mt-5">
    <h2 class="mb-4">üí≥ Thanh to√°n</h2>

    <form @submit.prevent="submitOrder" class="bg-white p-4 rounded shadow">
      <div class="mb-3">
        <label class="form-label">H·ªç t√™n</label>
        <input v-model="order.name" class="form-control" required />
      </div>

      <div class="mb-3">
        <label class="form-label">ƒê·ªãa ch·ªâ</label>
        <input v-model="order.address" class="form-control" required />
      </div>

      <div class="mb-3">
        <label class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
        <input v-model="order.phone" class="form-control" required />
      </div>

      <div class="mb-3">
        <label class="form-label">Ph∆∞∆°ng th·ª©c thanh to√°n</label>
        <select v-model="order.payment" class="form-select">
          <option value="COD">Thanh to√°n khi nh·∫≠n h√†ng</option>
          <option value="BANK">Chuy·ªÉn kho·∫£n</option>
        </select>
      </div>

      <div class="alert alert-info">
        T·ªïng ti·ªÅn: <strong>{{ formatPrice(total) }}</strong>
      </div>

      <button class="btn btn-primary">X√°c nh·∫≠n thanh to√°n</button>
      <router-link to="/cart" class="btn btn-secondary ms-2">
        Quay l·∫°i
      </router-link>
    </form>
  </div>
</template>
